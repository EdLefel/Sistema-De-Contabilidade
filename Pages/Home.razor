@using BancoDeDados.Services
@using Microsoft.AspNetCore.Authorization
@inject NavigationManager Navigation
@using Microsoft.AspNetCore.Components.Authorization
@using Users.models
@page "/dashboard"
@attribute [Authorize]

<PageTitle>dashboard - ELF</PageTitle>

<div class="bodyy">
    <h1>Dashboard</h1>
    <h3>Painel de Controle e Estatísticas</h3>

    <div class="padbody"/>

    <div class="simple-bar-chart">
    
        <div class="item" style="--clr: #5EB344; --val: 637.6; background: linear-gradient(75deg, #5EB344, #b6f2a4">
            <div class="label">Vendas </div>
            <div class="value">637.6</div>
        </div>
        
        <div class="item" style="--clr: #FCB72A; --val: 50; background: linear-gradient(75deg, #FCB72A, #fccd6f">
            <div class="label">Compras</div>
            <div class="value">50</div>
        </div>
        
        <div class="item" style="--clr: #F8821A; --val: 300.0; background: linear-gradient(75deg, #F8821A, #ffae67">
            <div class="label">Gastos</div>
            <div class="value">300</div>
        </div>
        
        <div class="item" style="--clr: #E0393E; --val: 15; background: linear-gradient(75deg, #E0393E, #ff565c">
            <div class="label">Dividas</div>
            <div class="value">0.7</div>
        </div>
        
        <div class="item" style="--clr: #963D97; --val: 5.7; background: linear-gradient(75deg, #963D97, #ed79ef">
            <div class="label">A Receber</div>
            <div class="value">15.7</div>
        </div>
        
        <div class="item" style="--clr: #069CDB; --val: 5; background: linear-gradient(75deg, #069CDB, #78d4fb">
            <div class="label">Pedidos</div>
            <div class="value">5</div>
        </div>
    </div>

     <ul>
        <li><h6>Útimos Pedidos</h6></li>
    </ul>
    <ul>
        <li><h6>Atalho de Ações</h6></li>
    </ul>
</div>


@code{
    
    @inject AuthenticationStateProvider AuthenticationStateProvider

    private string userName;

     protected override async Task OnInitializedAsync()
    {
        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;

        if (!user.Identity.IsAuthenticated)
        {
            // Se o usuário não estiver autenticado, redireciona para a página de login
            Navigation.NavigateTo("/");
        }
        else
        {
            userName = user.Identity.Name;
        }
    }

}